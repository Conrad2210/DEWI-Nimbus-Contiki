<!-- the modal that is used to edit a store in the directory -->
<div class="container-fluid no-margin-padding" style="margin-bottom: 25px; margin-top: 15px;">
    <h4 style="text-align:center;">Edit Store Details</h4>
    <div class="col-md-12">
        <ul class="nav nav-tabs editTabs">
            <li style="margin-left: 30px;" ng-class="{'active' : activeTab == 1}"><a ng-click="setActiveTab(1); setEditTab('tab1')">Address</a></li>
            <li ng-class="{'active' : activeTab == 2}"><a ng-click="setActiveTab(2); setEditTab('tab2')">Description</a></li>
            <li ng-class="{'active' : activeTab == 3}"><a ng-click="setActiveTab(3); setEditTab('tab3')">Phone & Web</a></li>
            <li ng-class="{'active' : activeTab == 4}"><a ng-click="setActiveTab(4); setEditTab('tab4')">Image</a></li>
            <li ng-class="{'active' : activeTab == 5}"><a ng-click="setActiveTab(5); setEditTab('tab5')">Categories</a></li>
            <li ng-class="{'active' : activeTab == 6}"><a ng-click="setActiveTab(6); setEditTab('tab6')">Miscellaneous</a></li>
        </ul>
    </div>
    <div ng-switch on="editTab">
        <div class="col-md-12" ng-switch-when="tab1">
            <label style="margin-top: 10px;">
                Name:<span class="error" ng-show="isNewShop && !isValid">
                    Required!
                </span>
            </label>
            <input ng-change="nameInput()" ng-model="tempStore.name1" type="text" class="form-control" name="name" id="name" placeholder="enter name" required>
            <label style="margin-top: 10px;">Name: </label>
            <input ng-model="tempStore.name2" type="text" class="form-control" id="name2" placeholder="enter secondary name">
            <label style="margin-top: 10px;">Address Line 1: </label>
            <input ng-model="tempStore.addressline1" type="text" class="form-control" id="addressline1" placeholder="enter address">
            <label style="margin-top: 10px;">Address Line 2: </label>
            <input ng-model="tempStore.addressline2" type="text" class="form-control" id="addressline2" placeholder="enter address">
            <label style="margin-top: 10px;">Address Line 3: </label>
            <input ng-model="tempStore.addressline3" type="text" class="form-control" id="addressline3" placeholder="enter address">
            <label style="margin-top: 10px;">Address Line 4: </label>
            <input ng-model="tempStore.addressline4" type="text" class="form-control" id="addressline4" placeholder="enter address">
            <label style="margin-top: 10px;">Zipcode: </label>
            <input ng-model="tempStore.zipcode" type="text" class="form-control" id="zipcode" placeholder="enter zipcode">
            <label style="margin-top: 10px;">Country: {{tempStore.country}}  </label><br />
            <select ng-model="tempStore.country">
                <option value="">-- Select a Country --</option>
                <option ng-repeat="country in countries" value="{{country.name}}">{{country.name}} - {{country.code}}</option>
            </select>
        </div>

        <div class="col-md-12" ng-switch-when="tab2">
            <label style="margin-top: 10px;">Billboard Text: </label>
            <input ng-model="tempStore.billboard_text" type="text" class="form-control" id="name" placeholder="enter billboard text">
            <label style="margin-top: 10px;">Description:</label>
            <textarea id="editor1" ckeditor="editorOptions" ng-model="tempStore.description"></textarea>
            <script>CKEDITOR.replace('editor1');</script>
        </div>

        <div class="col-md-12" ng-switch-when="tab3">
            <label style="margin-top: 10px;">Phone: </label>
            <input ng-model="tempStore.phone" type="text" class="form-control" id="name" placeholder="enter phone number">
            <label style="margin-top: 10px;">Mobile: </label>
            <input ng-model="tempStore.mobile" type="text" class="form-control" id="name" placeholder="enter mobile number">
            <label style="margin-top: 10px;">Email: </label>
            <input ng-model="tempStore.email" type="text" class="form-control" id="name" placeholder="enter email address">
            <label style="margin-top: 10px;">Fax: </label>
            <input ng-model="tempStore.fax" type="text" class="form-control" id="name" placeholder="enter fax number">
            <label style="margin-top: 10px;">Website: </label>
            <input ng-model="tempStore.web" type="text" class="form-control" id="name" placeholder="enter store website">
        </div>

        <div class="col-md-12" ng-switch-when="tab4">
            <hr />
            <label style="margin-top: 10px;">Store Image: </label>
            <p>Upload a new image: ( Please ensure only .png files are selected )</p>
            <input type="file" ng-model="storeImg" name="name" base-sixty-four-input required onload="onLoad" maxsize="500" accept="image/png">
            <br />
            <table class="table" style="width: 100%;">
                <thead>
                    <tr>
                        <th style="text-align: center;">Current Image</th>
                        <th style="text-align: center;">Preview New Image</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th ng-show="showStoreImg" style="text-align: center;">
                            <img class="img-thumbnail" style="width:150px;" ng-src='{{tempStore.image_string}}' onError="this.src = './img/spinner.gif'"/>
                            <br />
                            <button class="btn btn-primary" ng-click="deleteStoreImage()" style="margin-top:10px;">Delete Image</button>
                        </th>
                        <th ng-show="!showStoreImg" style="text-align: center;">
                            <img class="img-thumbnail" style="width:150px;" src='../img/blank_profile.jpg' />
                        </th>
                        <th ng-show="previewStoreImg" style="text-align: center;">
                            <img class="img-thumbnail" style="width:150px;" ng-src='data:image/png;base64,{{storeImg.base64}}' />
                            <br />
                            <button class="btn btn-success" ng-click="changeStoreImage()">Confirm</button>
                            <button class="btn btn-danger" ng-click="discardUploadedImage(1)">Cancel</button>
                        </th>
                    </tr>
                </tbody>
            </table>
            <hr />

            <label style="margin-top: 10px;">Background Image: </label>
            <p>Upload a new image: ( Please ensure only .png files are selected )</p>
            <input type="file" ng-model="bkgImg" name="name" base-sixty-four-input required onload="onLoad1" maxsize="500" accept="image/png">
            <br />
            <table class="table" style="width: 100%;">
                <thead>
                    <tr>
                        <th style="text-align: center;">Current Image</th>
                        <th style="text-align: center;">Preview New Image</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th ng-show="showBkgImg" style="text-align: center;">
                            <img class="img-thumbnail" style="width:150px;" ng-src='{{tempStore.bg_image_string}}' onError="this.src = './img/spinner.gif'"/>
                            <br />
                            <button class="btn btn-primary" ng-click="deleteStoreBkgImage()" style="margin-top:10px;">Delete Image</button>
                        </th>
                        <th ng-show="!showBkgImg" style="text-align: center;">
                            <img class="img-thumbnail" style="width:150px;" src='../img/blank_profile.jpg' />
                        </th>
                        <th ng-show="previewStoreBkgImg" style="text-align: center;">
                            <img class="img-thumbnail" style="width:150px; margin-bottom: 15px;" ng-src='data:image/png;base64,{{bkgImg.base64}}' />
                            <br />
                            <button class="btn btn-success" ng-click="changeStoreBkgImage()">Confirm</button>
                            <button class="btn btn-danger" ng-click="discardUploadedImage(2)">Cancel</button>
                        </th>
                    </tr>
                </tbody>
            </table>
            <hr />
        </div>

        <div class="col-md-12" ng-switch-when="tab5">
            <label style="margin-top: 10px;">Categories: </label>
            <!-- Needs further work to actually add categories to shop before being sent to server for update -->
            <div class="col-md-10 col-md-offset-1" style="border: 2px solid gray; padding: 5px;">
                <lable ng-repeat="item in tags track by $index" ng-click="toggleTags(item, $index)" class="btn" ng-class="item.isActive ? 'selectTag' : 'ignoreTag'" style="margin: 5px;">
                    <input type="checkbox" id="{{$index}}" ng-checked="{{item.isActive}}" />  {{item.category}}
                </lable>
            </div>
            </br>
        </div>


        <div class="col-md-12" ng-switch-when="tab6">
            <label style="margin-top: 10px;">Service Level: </label>
            <input ng-model="tempStore.serviceLevel" type="text" class="form-control" id="name" placeholder="enter service level">
            <label style="margin-top: 10px;">Store Active: {{tempStore.isActive}}</label><br />
            <select ng-model="tempStore.isActive">
                <option selected disabled>-- Select a status --</option>
                <option value=true>True</option>
                <option value=false>False</option>
            </select></br>
            <label style="margin-top: 10px;">Add User: </label>
            <input ng-model="tempStore.addUser" type="text" class="form-control" id="name" placeholder="enter user details">
        </div>

        <div class="col-md-12" style="text-align:center; padding-top: 40px;">
            <button class="btn btn-danger" ng-click="changeStoreDisplay('goBack'); " style="margin-right: 25px;">Cancel</button>
            <button class="btn btn-success" ng-click="addUpdateStore();changeStoreDisplay('goBack'); " style="margin-left: 25px;">Confirm</button>
        </div>
    </div>
</div>


